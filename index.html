<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arrival Time Calculator</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: #202020 0%;
      margin: 0;
      padding: 16px;
    }

    .container {
      background: white;
      padding: 24px 20px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      width: 100%;
      max-width: 100%;
    }

    h1 {
      text-align: center;
      color: #333;
      margin: 0 0 24px 0;
      font-size: 24px;
      font-weight: 700;
    }

    .input-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
      font-size: 14px;
    }

    input {
      width: 100%;
      padding: 14px 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      color: #333;
      transition: border-color 0.2s;
    }

    input:focus {
      outline: none;
      border-color: #112ca4;
    }

    button {
      width: 100%;
      padding: 16px;
      background: #0f3f8d;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      margin-top: 16px;
      transition: transform 0.15s, box-shadow 0.15s;
    }

    button:active {
      transform: scale(0.98);
      box-shadow: 0 2px 8px rgba(36, 63, 183, 0.4);
    }

    .result {
      background: linear-gradient(135deg, #f5f7fa 0%, #0f3f8d 100%);
      padding: 20px;
      border-radius: 12px;
      margin-top: 24px;
      display: none;
    }

    .result.active {
      display: block;
    }

    .result-item {
      margin: 16px 0;
    }

    .result-label {
      font-weight: 600;
      color: #555;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .result-value {
      color: #667eea;
      font-weight: 700;
      font-size: 32px;
      margin-top: 4px;
    }

    @media (max-width: 480px) {
      body {
        padding: 12px;
      }

      .container {
        padding: 20px 16px;
        border-radius: 12px;
      }

      h1 {
        font-size: 20px;
        margin-bottom: 20px;
      }

      input {
        padding: 12px 10px;
        font-size: 16px;
      }

      button {
        padding: 14px;
        font-size: 15px;
      }

      .result-value {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Arrival Time Calculator</h1>

    <div class="input-group">
      <label for="distanceInput">Distance (km):</label>
      <input id="distanceInput" type="number" step="0.01" placeholder="Enter distance"/>
    </div>

    <div class="input-group">
      <label for="speedInput">Speed (km/h):</label>
      <input id="speedInput" type="number" step="0.01" placeholder="Enter speed" value="140" />
    </div>

    <button id="calculateBtn" onclick="calculate()">Calculate</button>

    <div id="resultPanel" class="result">
      <div class="result-item">
        <span class="result-label">Arrival Time:</span>
        <div class="result-value" id="arrivalTime">—</div>
      </div>
      <div class="result-item">
        <span class="result-label">Time Left:</span>
        <div class="result-value" id="timeLeft">—</div>
      </div>
    </div>
  </div>

  <script>
    let arrivalTimeMs = null;
    let countdownInterval = null;

    const distanceInput = document.getElementById('distanceInput');
    const speedInput = document.getElementById('speedInput');
    const calculateBtn = document.getElementById('calculateBtn');
    const resultPanel = document.getElementById('resultPanel');
    const arrivalTimeDisplay = document.getElementById('arrivalTime');
    const timeLeftDisplay = document.getElementById('timeLeft');

    // Format time remaining as HH:MM:SS or MM:SS
    function formatTimeRemaining(ms) {
      if (ms <= 0) return '00:00:00';
      const totalSeconds = Math.floor(ms / 1000);
      const hours = Math.floor(totalSeconds / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = totalSeconds % 60;

      const pad = (n) => String(n).padStart(2, '0');
      if (hours > 0) {
        return `${pad(hours)}:${pad(minutes):pad(seconds)}`;
      }
      return `${pad(minutes)}:${pad(seconds)}`;
    }

    // Update the time left display
    function updateTimeLeft() {
      if (arrivalTimeMs === null) return;

      const now = Date.now();
      const remaining = arrivalTimeMs - now;

      if (remaining <= 0) {
        timeLeftDisplay.textContent = '00:00:00';
        clearInterval(countdownInterval);
        countdownInterval = null;
        return;
      }

      timeLeftDisplay.textContent = formatTimeRemaining(remaining);
    }

    // Calculate and start countdown
    function calculate() {
      console.log('Calculate called');
      const distance = parseFloat(distanceInput.value);
      const speed = parseFloat(speedInput.value);

      console.log('Distance:', distance, 'Speed:', speed);

      if (isNaN(distance) || isNaN(speed) || distance <= 0 || speed <= 0) {
        alert('Please enter valid positive numbers for distance and speed.');
        return;
      }

      // Calculate time needed in hours, then convert to milliseconds
      const timeNeededHours = distance / speed;
      const timeNeededMs = timeNeededHours * 60 * 60 * 1000;

      // Calculate arrival time
      arrivalTimeMs = Date.now() + timeNeededMs;

      // Display arrival time (24-hour format without seconds)
      const arrivalDate = new Date(arrivalTimeMs);
      const hours = String(arrivalDate.getHours()).padStart(2, '0');
      const mins = String(arrivalDate.getMinutes()).padStart(2, '0');
      const secs = String(arrivalDate.getSeconds()).padStart(2, '0');
      arrivalTimeDisplay.textContent = `${hours}:${mins}:{secs}`;

      // Show results panel
      resultPanel.classList.add('active');

      // Update time left immediately
      updateTimeLeft();

      // Stop previous countdown if any
      if (countdownInterval) clearInterval(countdownInterval);

      // Start new countdown (update every 1 second)
      countdownInterval = setInterval(updateTimeLeft, 1000);
    }

    calculateBtn.addEventListener('click', onCalculate);
  </script>
</body>
</html>
